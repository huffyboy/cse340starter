<% if (title) { %>
    <h1><%= title %></h1>
<% } else { %>
    <script>
        window.location.href = "/";
    </script>
<% } %>

<% errors = (typeof errors !== 'undefined' && errors !== null) ? errors : [] %>
<% if (errors.length > 0) { %>
    <ul class="notice">
        <% errors.forEach(error => { %>
            <li><%= error.msg %></li>
        <% }) %>
    </ul>
<% } %>

<div class="management">
    <%- messages() %>
    <form id="updateForm" action="/inv/update" method="post">
        <div>
            <label for="classificationList">Classification:</label>
            <%- classificationSelect %>
        </div>
        <div>
            <label for="inv_make">Make:</label>
            <input type="text" id="inv_make" name="inv_make" value="<%= locals.inv_make %>" required>
        </div>
        <div>
            <label for="inv_model">Model:</label>
            <input type="text" id="inv_model" name="inv_model" value="<%= locals.inv_model %>" required>
        </div>
        <div>
            <label for="inv_year">Year:</label>
            <input type="number" id="inv_year" name="inv_year" min="1000" max="9999" placeholder="YYYY" value="<%= locals.inv_year %>" required>
        </div>
        <div>
            <label for="inv_price">Price:</label>
            <input type="number" id="inv_price" name="inv_price" max="999999999" value="<%= locals.inv_price %>" required>
        </div>
        <div>
            <label for="inv_miles">Miles:</label>
            <input type="number" id="inv_miles" name="inv_miles" min="0" step="1" value="<%= locals.inv_miles %>" required>
        </div>
        <div>
            <label for="inv_color">Color:</label>
            <input type="text" id="inv_color" name="inv_color" value="<%= locals.inv_color %>" required>
        </div>
        <div>
            <label for="inv_description">Description:</label>
            <textarea id="inv_description" name="inv_description" required><%= locals.inv_description %></textarea>
        </div>
        <div class="image-preview-container">
            <label for="imageList">Image:</label>
            <%- imageSelect %>
        </div>
        <div class="image-preview-container">
            <label for="thumbnailList">Thumbnail Image:</label>            
            <%- thumbnailSelect %>
        </div>
        <div>
            <button type="submit" disabled>Update Vehicle</button>

            <input
                type="hidden" name="inv_id"
                <% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
            <% } %>>

        </div>
    </form>
</div>
<script src="/js/image-select-preview.js"></script>
<script src="/js/inv-update.js"></script>